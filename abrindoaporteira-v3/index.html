<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:title" content="Abrindo a porteira">
    <meta property="og:description"
        content="Descubra as 5 estrat√©gias essenciais que todo produtor rural precisa conhecer para ter uma...">
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../src/css/output.css?v4">

    <title>Abrindo a porteira</title>

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','GTM-TDHRKG27');</script>
        <!-- End Google Tag Manager -->

</head>

<body class="font-roboto leading-relaxed antialiased">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TDHRKG27"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <section
        class="relative bg-hero bg-zinc-950 h-full md:h-[49em] flex items-center justify-center p-4 pb-0"
        id="hero">
        <div
            class="absolute hidden md:block z-10 bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-primary to-transparent">
        </div>

        <div
            class="container mx-auto flex justify-center md:justify-start items-center md:items-start flex-wrap md:flex-nowrap  gap-4 w-full">
            <div
                class="z-10 flex justify-center items-start flex-col gap-4 md:gap-8  rounded-3xl max-w-[600px] w-full place-self-start">
                <img src="../src/images/logo.webp" alt="logo" class="w-52 h-16">
                <div class="flex justify-center items-start  flex-col p-4 rounded-3xl max-w-[600px] w-full bg-white/10">
                    <h1 class="text-white text-2xl font-bold mb-4">
                        Descubra as 5 estrat√©gias essenciais que todo produtor rural precisa conhecer para ter uma
                        fazenda mais lucrativa.
                    </h1>
                    <span class="text-white text-sm border-white border-l-2 ps-3">
                        Independente do tamanho da sua propriedade ou do tempo que voc√™ est√° nesse neg√≥cio, voc√™ ter√°
                        clareza de como transformar sua fazenda.
                    </span>

                    <p class="text-white text-sm mt-4">
                        üìÖ 04/02, ter√ßa-feira | ‚è∞ 19h | üëâüèª Online, ao vivo e gratuito
                    </p>


                    <div class='box-outer w-full mt-4' style="text-align:left;" id='form'>
                        <div class='main_box'>
                            <div class='bar top'></div>
                            <div class='bar bottom delay'></div>
                            <form method="POST" id="form_1" class="_form _form_1 _inline-form  _dark">
                                <input type="hidden" name="utm_source" id="utm_source" value="">
                                <input type="hidden" name="utm_medium" id="utm_medium" value="">
                                <input type="hidden" name="utm_campaign" id="utm_campaign" value="">
                                <input type="hidden" name="utm_content" id="utm_content" value="">
                                <input type="hidden" name="utm_term" id="utm_term" value="">

                                <div class="_form-content">
                                    <div class="_form_element">
                                        <label for="fullname" class="_form-label"></label>
                                        <div class="_field-wrapper">
                                            <input type="text" id="fullname" name="fullname" class="fullname"
                                                placeholder="Escreva seu nome" required />
                                        </div>
                                    </div>
                                    <div class="_form_element">
                                        <label for="email" class="_form-label"></label>
                                        <div class="_field-wrapper">
                                            <input type="email" id="email" name="email" class="email"
                                                placeholder="Digite seu melhor email" required />
                                        </div>
                                    </div>

                                    <div class="_button-wrapper _full_width">
                                        <button id="_form_1_submit" class="_submit font-bold" type="submit">Quero
                                            participar ‚Üí</button>
                                    </div>
                                    <div class="_clear-element"></div>
                                </div>
                                <div class="_form-thank-you" style="display:none;"></div>
                                <div class="_form-branding">
                                    <div class="_marketing-by"></div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <style>
                        #name_hd:focus-within~div#email_hd {
                            display: block !important;
                        }
                    </style>



                    <style>
                        #name_hd:focus-within~div#email_hd {
                            display: block !important;
                        }
                    </style>

                    <p class="text-white text-xs mt-2">
                        Evento exclusivo, com vagas limitadas.
                    </p>
                </div>
            </div>

            <img async src="../src/images/agradecimentos.webp" alt="olhando para o lado"
                class="z-0 w-[15em] h-[20em] md:w-[23em] lg:w-[30em] xl:w-[35em] md:h-auto  md-0  mt:ms-4 lg:ms-24 mt-0 md:mt-16 self-end">
        </div>

    </section>
    <footer class="bg-zinc-900">
        <div class="container mx-auto text-center text-zinc-500 pt-6">
            <div>Copyright Fazenda Africa ¬© Todos os direitos reservados</div>
            <div class="flex justify-center items-center flex-wrap gap-4">
                <a href="#" class="text-emerald-600 hover:text-secondary/40 ">Aviso Legal</a>
                <a href="#" class="text-emerald-600 hover:text-secondary/40 ">Politicas de Privacidade</a>
                <a href="#" class="text-emerald-600 hover:text-secondary/40 ">Politicas deCookies</a>
            </div>
            <p class="text-xs py-4">
                Este site n√£o faz parte nem √© endossado pelo Facebook‚Ñ¢. Facebook‚Ñ¢ √© uma marca registrada da META‚Ñ¢, Inc.
                Os resultados mencionados acima s√£o os meus resultados pessoais. Por favor, entenda que meus resultados
                n√£o s√£o t√≠picos, e n√£o estou sugerindo que voc√™ necessariamente os replicar√° ou ter√° os mesmos
                resultados. Tenho a vantagem de ter anos de experi√™ncia nesta √°rea. Estou compartilhando os resultados
                apenas como exemplo. Seus resultados podem variar e depender√£o de diversos fatores, como sua
                experi√™ncia, conhecimentos pr√©vios e at√© sua √©tica de trabalho.
                Na minha experi√™ncia, qualquer conquista ou projeto envolve riscos, assim como esfor√ßo e a√ß√£o constante.
                Se voc√™ n√£o estiver disposto a aceitar isso, esta forma√ß√£o pode n√£o ser adequada para voc√™. Agrade√ßo
                pelo seu interesse e compreens√£o.
                Ao final desta forma√ß√£o inicial gratuita, farei uma oferta para quem desejar acesso a um programa
                completo que ajudar√° a implementar e se aprofundar ainda mais no assunto. Isso √© totalmente opcional.
                Esta forma√ß√£o inicial gratuita consiste em 4 v√≠deos e, caso voc√™ n√£o queira adquirir o programa
                completo, poder√° sair sem comprar nada a qualquer momento. A forma√ß√£o inicial gratuita n√£o implica
                nenhum compromisso, e voc√™ poder√° aplicar imediatamente por conta pr√≥pria o que aprender.
            </p>
        </div>
    </footer>
    <!--Script do input de telefone-->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/25.2.1/build/css/intlTelInput.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/25.2.1/build/js/intlTelInput.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/25.2.1/build/js/intlTelInputWithUtils.min.js"></script>
    <script>
        var input = document.querySelector("#phone");
        var iti = window.intlTelInput(input, {
            initialCountry: "auto",
            geoIpLookup: function (callback) {
                fetch('https://ipinfo.io/json')
                    .then(response => response.json())
                    .then(data => callback(data.country))
                    .catch(() => callback('us'));
            },
            utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/25.2.1/build/js/intlTelInputWithUtils.min.js",
            formatOnDisplay: true,
            nationalMode: false,
            autoHideDialCode: true,
            separateDialCode: true,
        });

        // Adicionar verifica√ß√£o de validade ao sair do campo
        input.addEventListener('blur', function () {
            if (iti.isValidNumber()) {
                // N√∫mero v√°lido
                input.classList.remove('invalid');
            } else {
                alert('Por favor, digite um n√∫mero de telefone v√°lido.');
                input.classList.add('invalid');
            }
        });

        // Prevenir entradas inv√°lidas
        input.addEventListener('keydown', function (e) {
            const allowedKeys = ['Backspace', 'ArrowLeft', 'ArrowRight', 'Delete', 'Tab'];
            if (allowedKeys.includes(e.key)) {
                return;
            }
            if (!/\d/.test(e.key)) {
                e.preventDefault();
            }
        });

        // Limitar o n√∫mero de d√≠gitos conforme o pa√≠s selecionado
        input.addEventListener('input', function () {
            var countryData = iti.getSelectedCountryData();
            var maxLength = countryData.nationalNumberMaxLength || 15;
            var dialCodeLength = countryData.dialCode.length;

            // Calcular o n√∫mero m√°ximo de caracteres permitidos
            var maxChars = dialCodeLength + maxLength + 1; // +1 para o espa√ßo ou s√≠mbolo adicional

            if (input.value.length > maxChars) {
                input.value = input.value.slice(0, maxChars);
            }
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('form_1');
            form.addEventListener('submit', function (event) {
                event.preventDefault(); // Intercepta o envio do formul√°rio

                // Validar campos antes de enviar
                if (!validateForm()) {
                    return;
                }

                // Coleta os dados do formul√°rio
                const formData = new FormData(form);

                // Adiciona data e hora de cadastro
                const now = new Date();
                formData.append('submission_date', now.toISOString());

                // Adiciona o nome personalizado do formul√°rio
                formData.append('nome_formulario', 'funil_call_Protocolo-Madrid');

                // Obt√©m a slug da p√°gina atual
                const slug = window.location.pathname.replace(/^\/|\/$/g, '');
                formData.append('P√°gina de Captura', slug);

                // Captura as UTMs da p√°gina atual
                const urlParams = new URLSearchParams(window.location.search);
                formData.set('utm_source', urlParams.get('utm_source') || '');
                formData.set('utm_medium', urlParams.get('utm_medium') || '');
                formData.set('utm_campaign', urlParams.get('utm_campaign') || '');
                formData.set('utm_content', urlParams.get('utm_content') || '');
                formData.set('utm_term', urlParams.get('utm_term') || '');

                // Converte os dados do formul√°rio em um objeto para f√°cil manipula√ß√£o
                const data = {};
                formData.forEach((value, key) => {
                    data[key] = value;
                });

                // Dispara o webhook com os dados do formul√°rio
                fetch('https://n8n.aesmkt.com.br/webhook/lzto-ap-fev25-ads', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                    .then(response => response.json())
                    .then(result => {
                        console.log('Webhook disparado com sucesso:', result);
                        // Redireciona para a p√°gina de agradecimento
                        window.location.href = 'https://www.fazendaafrica.com.br/abrindoaporteira-obg';
                    })
                    .catch(error => {
                        console.error('Erro ao disparar o webhook:', error);
                    });
            });

            //M√°scara de telefone ao digitar
            const phoneInput = document.getElementById('phone');
            phoneInput.addEventListener('input', function (e) {
                let value = e.target.value.replace(/\D/g, ''); // Remove todos os caracteres n√£o num√©ricos
                value = value.substring(0, 11); // Limita a entrada a 11 d√≠gitos num√©ricos

                if (value.length > 0) {
                    value = '(' + value; // Adiciona o par√™nteses no in√≠cio
                }
                if (value.length > 2) {
                    value = value.slice(0, 3) + ') ' + value.slice(3); // Fecha o par√™nteses nos dois primeiros d√≠gitos
                }
                if (value.length > 8) {
                    value = value.slice(0, 10) + '-' + value.slice(10); // Adiciona o h√≠fen ap√≥s o quinto d√≠gito do n√∫mero
                }

                e.target.value = value;
            });

            //Manipula o apagamento sem travar
            phoneInput.addEventListener('keydown', function (e) {
                const key = e.key;
                if (key === 'Backspace' || key === 'Delete') {
                    let value = e.target.value.replace(/\D/g, ''); // Remove caracteres n√£o num√©ricos
                    e.target.value = value; // Reaplica sem m√°scara para permitir apagar livremente
                }
            });


        });

        function validateForm() {
            const name = document.getElementById('fullname').value.trim();
            const email = document.getElementById('email').value.trim();
            // const phone = document.getElementById('phone').value.trim();

            if (name === '' || email === '') {
                alert('Preencha todos los campos obrigat√≥rios.');
                return false;
            }

            return true;
        }
    </script>
</body>

</html>